FROM ubuntu:latest
LABEL maintainer = "andre.postiga@msn.com"

RUN apt-get update -y
RUN apt-get install -y python-pip python3.7-dev build-essential

RUN mkdir /install
WORKDIR /install
RUN set -e; \
        apk add --no-cache --virtual .build-deps \
                gcc \
                libc-dev \
                linux-headers \
                mariadb-dev \
                python3-dev \
                postgresql-dev \
        ;

COPY requirements.txt /
RUN pip install --upgrade pip
RUN pip install -r /requirements.txt

COPY app /var/www
WORKDIR /var/www

CMD ["python", "main.py"]
EXPOSE 5000